# End-to-End OLAP для розничной сети Маркет+Х

## Проектирование инфраструктуры и сбор требований
Контекст  
Сеть «Маркет+Х»:  
- 50 магазинов в 10 регионах
- 3 основных источника данных:
  - Транзакции (PostgreSQL) — 5 млн строк/месяц
  - Справочники товаров (MySQL) — 20 тыс. SKU
  - CRM (API) — данные о клиентах
 
Шаг 1. Сбор бизнес-требований  
Вопросы бизнесу:  
1. Какие отчёты критичны? (Пример: «Продажи по категориям в разрезе регионов»)
2. Кто пользователи?
3. Нужен ли мобильный доступ?

Ответы:
1. Динамика продаж по дням/неделям, Товары с отрицательной маржой, Эффективность акций, ABC-анализ товаров, Прогноз остатков
2. Менеджеры, аналитики, директора
3. Нет

Шаг 2. Выбор технологий  
Хранилище -/- PostgreSQL → ClickHouse -/- Колоночное хранение для аналитики  
OLAP -/- SSAS Tabular -/- Интеграция с Power BI  
ETL -/- Apache Airflow -/- Оркестрация сложных пайплайнов  
BI -/- Power BI + мобильное приложение -/- Поддержка RLS  

Шаг 3. Схема данных  
Звездообразная модель:  
- Факт-таблица: `sales_fact` (поля: `date_id`, `product_id`, `store_id`, `amount`, `profit`)  
- Измерения:  
  - `dim_date` (иерархия: Год → Квартал → Месяц → День)  
  - `dim_product` (атрибуты: category, brand, price)  
  - `dim_store` (атрибуты: region, city, size_sqm)  
 
Шаг 4. Инфраструктура  

